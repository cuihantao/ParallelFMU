<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<writer>
		<csvFileWriter resultFile="result.csv"  numOutputSteps="100"/>
		<outputVariables fmuId="1">
			<var>v</var>
			<var>h</var>
		</outputVariables>
	</writer>
	<fmus>
		<fmu id="0" name="BouncingBall1" path="test/data/BouncingBall.fmu" loader="fmuSdk" solver="euler" relativeTolerance="1.0e-5" toleranceControlled="1" defaultStepSize="1.0e-3" maxError="1.0e-5" eventInterval="1.0e-5" />
		<fmu id="1" name="BouncingBall2" path="test/data/BouncingBall.fmu" loader="fmuSdk" solver="euler" relativeTolerance="1.0e-5" toleranceControlled="1"/>
		<fmu id="2" name="BouncingBall3" path="test/data/BouncingBall.fmu" loader="fmuSdk" solver="euler" relativeTolerance="1.0e-5" toleranceControlled="1"/>
		<fmu id="3" name="BouncingBall4" path="test/data/BouncingBall.fmu" loader="fmiLib" solver="euler" relativeTolerance="1.0e-5" toleranceControlled="1"/>
	</fmus>
	<connections>
		<connection source="BouncingBall1" dest="BouncingBall2" bufferSize="10">
			<real out="1" in="1" />
			<real out="2" in="2" />
			<int out="3" in="3" />
			<bool out="4" in="4" />
			<string out="5" in="5" />
		</connection>
		<connection source="BouncingBall1" dest="BouncingBall3" bufferSize="10">
			<real out="6" in="6" />
			<real out="7" in="7" />
			<int out="8" in="8" />
			<bool out="9" in="9" />
			<string out="10" in="10" />
		</connection>
		<connection source="BouncingBall2" dest="BouncingBall4" bufferSize="10">
			<real out="11" in="11" />
			<real out="12" in="12" />
			<int out="13" in="13" />
			<bool out="14" in="14" />
			<string out="15" in="15" />
		</connection>
		<connection source="BouncingBall3" dest="BouncingBall4" bufferSize="10">
			<real out="16" in="16" />
			<real out="17" in="17" />
			<int out="18" in="18" />
			<bool out="19" in="19" />
			<string out="20" in="20" />
		</connection>
	</connections>
	<!-- The four FMUs are explicitly scheduled on different nodes, thus we use a MPI parallel simulation.
	System
	|_ Node 1
	|_ Core 1
	|_ FMU 0
	|_ Node 2
	|_ Core 2
	|_ FMU 1
	|_ Node 3
	|_ Core 1
	|_ FMU 2
	|_ FMU 3
	-->
	
	
	<scheduling>
		<nodes numNodes="2" numCoresPerNode="1" numFmusPerCore="1"> <!-- for the first two fmus -->
			<node>  
				<core numFmus="2"> <!-- for the last two fmus -->
				</node>
			</scheduling>
			<simulation startTime="2.2" endTime="3.3" defaultTolerance="1.0e-5" defaultMaxError="1.0e-6" globalDefaultStepSize="1.0e-3" globalEventInterval="2.0e-5"/>
		</configuration>
		